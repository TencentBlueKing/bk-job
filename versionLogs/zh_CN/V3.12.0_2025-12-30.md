# V3.12.0 版本更新日志

## 新增
- [新增] Job 支持多租户 [详情](http://github.com/TencentBlueKing/bk-job/issues/3369)
- [新增] 支持多命名空间与多集群部署 [详情](http://github.com/TencentBlueKing/bk-job/issues/3743)
- [新增] 定时任务支持分享链接 [详情](http://github.com/TencentBlueKing/bk-job/issues/3907)
- [新增] IP选择器选中了业务下的所有节点时增加警告确认 [详情](http://github.com/TencentBlueKing/bk-job/issues/3687)
- [新增] 业务列表，区分业务、业务集、租户集 [详情](http://github.com/TencentBlueKing/bk-job/issues/3686)
- [新增] 支持使用集群外有Agent的机器作为本地分发源 [详情](http://github.com/TencentBlueKing/bk-job/issues/3467)
- [新增] ip选择器支持复制 host id [详情](http://github.com/TencentBlueKing/bk-job/issues/3631)
- [新增] 定时任务-支持任务级别的通知方式设置 [详情](http://github.com/TencentBlueKing/bk-job/issues/3557)
- [新增] Job 的 web 页面下发任务时可以支持批量输入 Host ID [详情](http://github.com/TencentBlueKing/bk-job/issues/3590)
- [新增] 支持内置Windows系统的Administrator账号 [详情](http://github.com/TencentBlueKing/bk-job/issues/3444)
- [新增] 快速执行脚本接口(windows目标主机)支持传密码 [详情](http://github.com/TencentBlueKing/bk-job/issues/3636)
- [新增] 提供文件分发任务执行对象为容器的APIGW接口 [详情](http://github.com/TencentBlueKing/bk-job/issues/3542)
- [新增] 提供查询业务级别消息通知配置的OpenAPI接口 [详情](http://github.com/TencentBlueKing/bk-job/issues/3853)
- [新增] 执行脚本、查结果提供v4接口 [详情](http://github.com/TencentBlueKing/bk-job/issues/3845)

## 优化
- [优化] 升级JDK 17 [详情](http://github.com/TencentBlueKing/bk-job/issues/3836)
- [优化] op系统提供MCP Server [详情](http://github.com/TencentBlueKing/bk-job/issues/3912)
- [优化] job-gateway日志优化 [详情](http://github.com/TencentBlueKing/bk-job/issues/1895)
- [优化] 快速执行接口防止重复调用执行 [详情](http://github.com/TencentBlueKing/bk-job/issues/3522)
- [优化] 任务历史模糊查询增加范围限制 [详情](http://github.com/TencentBlueKing/bk-job/issues/3856)
- [优化] 查询任务日志传入不存在的IP报错响应优化 [详情](http://github.com/TencentBlueKing/bk-job/issues/3370)
- [优化] 调用API启动作业时传入异常主机数据时的报错信息优化 [详情](http://github.com/TencentBlueKing/bk-job/issues/3456)
- [优化] 服务间接口长耗时调用优化 [详情](http://github.com/TencentBlueKing/bk-job/issues/3623)
- [优化] 快速执行API接口增加主机校验 [详情](http://github.com/TencentBlueKing/bk-job/issues/3846)
- [优化] 建设运维辅助OP系统 [详情](http://github.com/TencentBlueKing/bk-job/issues/3842)
- [优化] Ingress支持适配腾讯云CLB [详情](http://github.com/TencentBlueKing/bk-job/issues/3839)
- [优化] API文档，返回字段优化 [详情](http://github.com/TencentBlueKing/bk-job/issues/3734)
- [优化] ip 选择器静态拓扑主机搜索增加模糊搜索提示 [详情](http://github.com/TencentBlueKing/bk-job/issues/3765)
- [优化] 组件SSL加密支持MySQL 8.0 [详情](http://github.com/TencentBlueKing/bk-job/issues/3747)
- [优化] 任务列表接口增加参数校验 [详情](http://github.com/TencentBlueKing/bk-job/issues/3735)
- [优化] 文件源健康状态探测优化 [详情](http://github.com/TencentBlueKing/bk-job/issues/2744)
- [优化] 作业执行总耗时优化 [详情](http://github.com/TencentBlueKing/bk-job/issues/3692)
- [优化] 健康检测支持检查MongoDB的密码正确性 [详情](http://github.com/TencentBlueKing/bk-job/issues/3663)
- [优化] 较长敏感参数存储长度超限提示优化 [详情](http://github.com/TencentBlueKing/bk-job/issues/3546)
- [优化] 作业模版引用账号导入导出优化 [详情](http://github.com/TencentBlueKing/bk-job/issues/3581)
- [优化] 导入作业，目标主机可能匹配的不对 [详情](http://github.com/TencentBlueKing/bk-job/issues/3287)

## 修复
- [修复] 只有审核步骤的任务消息通知发送失败 [详情](http://github.com/TencentBlueKing/bk-job/issues/3942)
- [修复] 含有未执行的本地文件分发步骤的任务去重试报错 [详情](http://github.com/TencentBlueKing/bk-job/issues/3931)
- [修复] 脚本上线偶现报错 [详情](http://github.com/TencentBlueKing/bk-job/issues/3908)
- [修复] 镜像仓库开启了认证，migrate pod拉取镜像失败 [详情](http://github.com/TencentBlueKing/bk-job/issues/3682)
- [修复] 使用集群外有agent的机器作为文件分发源，文件源文件仍然需要宿主机agnet [详情](http://github.com/TencentBlueKing/bk-job/issues/3888)
- [修复] ip 选择器容器选择回显问题 [详情](http://github.com/TencentBlueKing/bk-job/issues/3780)
- [修复] 账号列表部分字段排序无效 [详情](http://github.com/TencentBlueKing/bk-job/issues/3826)
- [修复] 作业执行详情页面搜索日志报错 [详情](http://github.com/TencentBlueKing/bk-job/issues/3813)
- [修复] 多租户环境，动态分组主机预览没数据 [详情](http://github.com/TencentBlueKing/bk-job/issues/3785)
- [修复] 上传正确的bash脚本，却提示首行没有定义合法的脚本类型 [详情](http://github.com/TencentBlueKing/bk-job/issues/3784)
- [修复] 文件分发任务执行详情页面偶现500错误 [详情](http://github.com/TencentBlueKing/bk-job/issues/3776)
- [修复] 非滚动步骤不显示重试记录列表 [详情](http://github.com/TencentBlueKing/bk-job/issues/3774)
- [修复] 作业执行任务步骤详情获取 executeCount 错误 [详情](http://github.com/TencentBlueKing/bk-job/issues/3767)
- [修复] 步骤执行详情查看脚本步骤内容脚本参数显示异常 [详情](http://github.com/TencentBlueKing/bk-job/issues/3713)
- [修复] 在aix上执行作业报语法错误 [详情](http://github.com/TencentBlueKing/bk-job/issues/3626)
- [修复] 无"作业模板查看"且有"执行方案查看"的执行方案,详情页修改方案名称会一直弹出提示框 [详情](http://github.com/TencentBlueKing/bk-job/issues/3643)
- [修复] 首页的国际化问题 [详情](http://github.com/TencentBlueKing/bk-job/issues/3646)
- [修复] 脚本有未上线的版本时,新增版本提示框编辑按钮应当大写 [详情](http://github.com/TencentBlueKing/bk-job/issues/3644)
- [修复] 脚本列表“去执行”报错 [详情](http://github.com/TencentBlueKing/bk-job/issues/3630)
- [修复] 定时任务,"结束前通知"的"通知方式",通知对象/通知方式都是必填项但没有必填项的标识 [详情](http://github.com/TencentBlueKing/bk-job/issues/3629)
- [修复] 定时任务用户指导页新建定时任务操作需要鉴权 [详情](http://github.com/TencentBlueKing/bk-job/issues/3616)
- [修复] ip 白名单目标业务被删除时编辑保存失败 [详情](http://github.com/TencentBlueKing/bk-job/issues/3615)
- [修复] 脚本执行获取公共脚本内容时 api 调用错误 [详情](http://github.com/TencentBlueKing/bk-job/issues/3608)
- [修复] OpenAPI接口查不到重试任务中未重试机器日志 [详情](http://github.com/TencentBlueKing/bk-job/issues/3575)
- [修复] 跨环境导入执行方案密文变量丢失导致方案同步失败 [详情](http://github.com/TencentBlueKing/bk-job/issues/3593)
- [修复] 定时任务相关错误码没有对应消息 [详情](http://github.com/TencentBlueKing/bk-job/issues/3586)
- [修复] 数据归档设置中，保留天数配置项有误 [详情](http://github.com/TencentBlueKing/bk-job/issues/3269)
- [修复] 导入的作业，编辑作业步骤执行账号为空 [详情](http://github.com/TencentBlueKing/bk-job/issues/3425)
- [修复] aix机器上执行有全局变量的作业报错，not found [详情](http://github.com/TencentBlueKing/bk-job/issues/3276)
- [修复] 容器选择报错 [详情](http://github.com/TencentBlueKing/bk-job/issues/3527)
- [修复] 脚本编辑器支持搜索 [详情](http://github.com/TencentBlueKing/bk-job/issues/3516)
- [修复] 默认图标路径不对 [详情](http://github.com/TencentBlueKing/bk-job/issues/3515)
- [修复] 分发文件日志报错 [详情](http://github.com/TencentBlueKing/bk-job/issues/3514)
- [修复] 部分环境File-Worker长时间运行后下载文件失败 [详情](http://github.com/TencentBlueKing/bk-job/issues/3501)
- [修复] IP选择器跨页全选时报错 [详情](http://github.com/TencentBlueKing/bk-job/issues/3483)
- [修复] IP选择器跨页全选容器报错 [详情](http://github.com/TencentBlueKing/bk-job/issues/3481)
- [修复] OpenAPI接口batch_get_job_instance_ip_log中主机bk_host_id为空 [详情](http://github.com/TencentBlueKing/bk-job/issues/3477)