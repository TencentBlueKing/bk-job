USE `job_manage`;
INSERT IGNORE INTO `job_manage`.`notify_template`(`code`, `name`, `channel`, `title`, `content`, `title_en`, `content_en`, `creator`, `last_modify_user`, `create_time`, `last_modify_time`, `is_default`) VALUES ('cronJobFailed', '定时任务执行失败通知模板', 'mail', '【蓝鲸作业平台】您有定时任务启动失败', '<table class=\"template-table\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"font-size: 14px; min-width: auto; mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #fff; background: #fff;\">\r\n	<tbody>\r\n		<tr>\r\n			<td align=\"center\" valign=\"top\" width=\"100%\" style=\"padding: 16px;\">\r\n			   <table class=\"template-table\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"956\" style=\"font-size: 14px; min-width: auto; mso-table-lspace: 0pt; mso-table-rspace: 0pt; padding-top:30px;\">\r\n					<tbody>\r\n						<tr>\r\n							<td valign=\"top\" align=\"center\" style=\"padding: 24px;\" bgcolor=\"#f9f8f6\">\r\n								<table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"font-size: 14px; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border: 1px solid #e6e6e6;\">\r\n									<tr>\r\n										<td class=\"email-title\" style=\"padding: 20px 36px; line-height: 1.5; border-bottom: 1px solid #e6e6e6; background: #fff; font-size: 22px;\">【蓝鲸作业平台】定时任务启动失败通知</td>\r\n									</tr>\r\n									<tr>\r\n										<td class=\"email-content\" style=\"padding: 0 36px; background: #fff;\">\r\n											<table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"font-size: 14px; mso-table-lspace: 0pt; mso-table-rspace: 0pt;\">\r\n												<tr>\r\n													<td class=\"email-source\" style=\"padding: 14px 0; color: #bebebe;\">来自 蓝鲸作业平台 的消息推送</td>\r\n												</tr>\r\n\r\n												<tr class=\"email-information\">\r\n													<td class=\"table-info\">\r\n														<table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"font-size: 14px; mso-table-lspace: 0pt; mso-table-rspace: 0pt;\">\r\n															<tr class=\"table-title\">\r\n																<td style=\"padding-top: 36px; padding-bottom: 14px; color: #707070;\">下列定时任务在预设定的执行时间 <font style=\"font-weight:bold;color:red;\">启动运行失败</font>，请重点关注！以免影响业务。</td>\r\n															</tr>\r\n															<tr>\r\n																<td>\r\n																	<table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"font-size: 14px; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border: 1px solid #e6e6e6; border-collapse: collapse;\">\r\n																		<tbody style=\"color: #707070;\">\r\n																			<tr>\r\n																				<td width=\"30%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: right; font-weight: bold; background-color: #f3f3f3;\">任务名称</td>\r\n																				<td width=\"70%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: left; font-weight: normal;\"><a href=\"{{ task.url }}\" style=\"color: #3c96ff\"> {{ task.name }}</a></td>\r\n																			</tr>\r\n																			<tr>\r\n																				<td width=\"30%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: right; font-weight: bold; background-color: #f3f3f3;\">所属业务</td>\r\n																				<td width=\"70%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: left; font-weight: normal;\">[{{ task.bk_biz_id }}] {{ task.bk_biz_name }}</td>\r\n																			</tr>\r\n																			<tr>\r\n																				<td width=\"30%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: right; font-weight: bold; background-color: #f3f3f3;\">设置人</td>\r\n																				<td width=\"70%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: left; font-weight: normal;\"> {{ task.operator }}</td>\r\n																			</tr>\r\n																			<tr>\r\n																				<td width=\"30%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: right; font-weight: bold; background-color: #f3f3f3;\">执行策略</td>\r\n																				<td width=\"70%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: left; font-weight: normal;\"> {{ task.cron.repeat_freq }}</td>\r\n																			</tr>\r\n																			<tr>\r\n																				<td width=\"30%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: right; font-weight: bold; background-color: #f3f3f3;\">策略详情</td>\r\n																				<td width=\"70%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: left; font-weight: normal;\"> {{ task.cron.time_set }}</td>\r\n																			</tr>\r\n																			<tr>\r\n																				<td width=\"30%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: right; font-weight: bold; background-color: #f3f3f3;\">出错原因</td>\r\n																				<td width=\"70%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: left; font-weight: normal;\"> [{{ task.error_code }}] {{ task.error_message }}</td>\r\n																			</tr>\r\n																		</tbody>\r\n																	</table>\r\n																</td>\r\n															</tr>\r\n														</table>\r\n													</td>\r\n												</tr>\r\n\r\n												<tr class=\"prompt-tips\">\r\n													<td style=\"padding-top: 32px; padding-bottom: 10px; color: #707070;\">如有任何疑问，请随时联系蓝鲸助手。</td>\r\n												</tr>\r\n												<tr class=\"info-remark\">\r\n													<td style=\"padding: 20px 0; text-align: right; line-height: 24px; color: #707070;\">\r\n														<div>{{task.cron.trigger_time}}</div>\r\n													</td>\r\n												</tr>\r\n											</table>\r\n										</td>\r\n									</tr>\r\n									<tr class=\"email-footer\">\r\n										<td style=\" padding: 20px 0 20px 36px; border-top: 1px solid #e6e6e6; background: #fff; color: #c7c7c7;\">你收到此邮件，是因为你是上列定时任务的执行干系人。</td>\r\n									</tr>\r\n								</table>\r\n							</td>\r\n						</tr>\r\n					</tbody>\r\n			   </table>\r\n			</td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n', '【BlueKing JOB】Cron Launch Failed Notification', '<table class=\"template-table\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"font-size: 14px; min-width: auto; mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #fff; background: #fff;\">\r\n	<tbody>\r\n		<tr>\r\n			<td align=\"center\" valign=\"top\" width=\"100%\" style=\"padding: 16px;\">\r\n			   <table class=\"template-table\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"956\" style=\"font-size: 14px; min-width: auto; mso-table-lspace: 0pt; mso-table-rspace: 0pt; padding-top:30px;\">\r\n					<tbody>\r\n						<tr>\r\n							<td valign=\"top\" align=\"center\" style=\"padding: 24px;\" bgcolor=\"#f9f8f6\">\r\n								<table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"font-size: 14px; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border: 1px solid #e6e6e6;\">\r\n									<tr>\r\n										<td class=\"email-title\" style=\"padding: 20px 36px; line-height: 1.5; border-bottom: 1px solid #e6e6e6; background: #fff; font-size: 22px;\">【BlueKing JOB】Cron Launch Failed Notification</td>\r\n									</tr>\r\n									<tr>\r\n										<td class=\"email-content\" style=\"padding: 0 36px; background: #fff;\">\r\n											<table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"font-size: 14px; mso-table-lspace: 0pt; mso-table-rspace: 0pt;\">\r\n												<tr>\r\n													<td class=\"email-source\" style=\"padding: 14px 0; color: #bebebe;\">This message is from <b>BlueKing JOB</b></td>\r\n												</tr>\r\n\r\n												<tr class=\"email-information\">\r\n													<td class=\"table-info\">\r\n														<table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"font-size: 14px; mso-table-lspace: 0pt; mso-table-rspace: 0pt;\">\r\n															<tr class=\"table-title\">\r\n																<td style=\"padding-top: 36px; padding-bottom: 14px; color: #707070;\">The Cron task below <font style=\"font-weight:bold;color:red;\">did not launch normally</font> at specified time, please pay attention !!!</td>\r\n															</tr>\r\n															<tr>\r\n																<td>\r\n																	<table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"font-size: 14px; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border: 1px solid #e6e6e6; border-collapse: collapse;\">\r\n																		<tbody style=\"color: #707070;\">\r\n																			<tr>\r\n																				<td width=\"30%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: right; font-weight: bold; background-color: #f3f3f3;\">NAME</td>\r\n																				<td width=\"70%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: left; font-weight: normal;\"><a href=\"{{ task.url }}\" style=\"color: #3c96ff\"> {{ task.name }}</a></td>\r\n																			</tr>\r\n																			<tr>\r\n																				<td width=\"30%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: right; font-weight: bold; background-color: #f3f3f3;\">BUSINESS</td>\r\n																				<td width=\"70%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: left; font-weight: normal;\">[{{ task.bk_biz_id }}] {{ task.bk_biz_name }}</td>\r\n																			</tr>\r\n																			<tr>\r\n																				<td width=\"30%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: right; font-weight: bold; background-color: #f3f3f3;\">OPERATOR</td>\r\n																				<td width=\"70%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: left; font-weight: normal;\"> {{ task.operator }}</td>\r\n																			</tr>\r\n																			<tr>\r\n																				<td width=\"30%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: right; font-weight: bold; background-color: #f3f3f3;\">REPEAT FREQUENCY</td>\r\n																				<td width=\"70%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: left; font-weight: normal;\"> {{ task.cron.repeat_freq }}</td>\r\n																			</tr>\r\n																			<tr>\r\n																				<td width=\"30%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: right; font-weight: bold; background-color: #f3f3f3;\">TIME SET</td>\r\n																				<td width=\"70%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: left; font-weight: normal;\"> {{ task.cron.time_set }}</td>\r\n																			</tr>\r\n																			<tr>\r\n																				<td width=\"30%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: right; font-weight: bold; background-color: #f3f3f3;\">Error Cause</td>\r\n																				<td width=\"70%\" style=\" padding: 16px; border: 1px solid #e6e6e6;text-align: left; font-weight: normal;\"> [{{ task.error_code }}] {{ task.error_message }}</td>\r\n																			</tr>\r\n																		</tbody>\r\n																	</table>\r\n																</td>\r\n															</tr>\r\n														</table>\r\n													</td>\r\n												</tr>\r\n\r\n												<tr class=\"prompt-tips\">\r\n													<td style=\"padding-top: 32px; padding-bottom: 10px; color: #707070;\">If You Have Any Questions or Concerns, Please Contact BK Assistant.</td>\r\n												</tr>\r\n												<tr class=\"info-remark\">\r\n													<td style=\"padding: 20px 0; text-align: right; line-height: 24px; color: #707070;\">\r\n														<div>{{task.cron.trigger_time}}</div>\r\n													</td>\r\n												</tr>\r\n											</table>\r\n										</td>\r\n									</tr>\r\n									<tr class=\"email-footer\">\r\n										<td style=\" padding: 20px 0 20px 36px; border-top: 1px solid #e6e6e6; background: #fff; color: #c7c7c7;\">You can receive this message because you\'re the operator of these cron tasks.</td>\r\n									</tr>\r\n								</table>\r\n							</td>\r\n						</tr>\r\n					</tbody>\r\n			   </table>\r\n			</td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n', 'admin', 'admin', 0, 0, b'0');
INSERT IGNORE INTO `job_manage`.`notify_template`(`code`, `name`, `channel`, `title`, `content`, `title_en`, `content_en`, `creator`, `last_modify_user`, `create_time`, `last_modify_time`, `is_default`) VALUES ('cronJobFailed', '定时任务执行失败通知模板', 'rtx', '【蓝鲸作业平台】定时任务启动失败通知', '任务名称：{{ task.name }}\r\n所属业务：[{{ task.bk_biz_id }}] {{ task.bk_biz_name }}\r\n执行策略：{{ task.cron.time_set }}\r\n出错原因：[{{ task.error_code }}] {{ task.error_message }}\r\n查看详情：{{ task.url }}', '【BlueKing JOB】Cron Launch Failed Notification', '   Task Name：{{ task.name }}\r\n    Business：[{{ task.bk_biz_id }}] {{ task.bk_biz_name }}\r\n    Time Set：{{ task.cron.time_set }}\r\n Error Cause：[{{ task.error_code }}] {{ task.error_message }}\r\nTask Details：{{ task.url }}', 'admin', 'admin', 0, 0, b'0');
INSERT IGNORE INTO `job_manage`.`notify_template`(`code`, `name`, `channel`, `title`, `content`, `title_en`, `content_en`, `creator`, `last_modify_user`, `create_time`, `last_modify_time`, `is_default`) VALUES ('cronJobFailed', '定时任务执行失败通知模板', 'sms', '您的业务 [{{ task.bk_biz_name }}] 当前有定时任务( {{ task.url }} )在规定时间没能正常启动运行，请及时处理。【蓝鲸作业平台】', '您的业务[{{ task.bk_biz_name }}]当前有定时任务( {{ task.url }} )在规定时间没能正常启动运行，原因([{{ task.error_code }}] {{ task.error_message }})请及时处理。【蓝鲸作业平台】\r\n', 'There\'s a cron task of [{{ task.bk_biz_name }}] did not launch normally at specified time, plz pay attention! more details: {{ task.url }}【BlueKing JOB】', 'There\'s a cron task of [{{ task.bk_biz_name }}] did not launch normally at specified time, because([{{ task.error_code }}] {{ task.error_message }}), plz pay attention! more details: {{ task.url }}【BlueKing JOB】\r\n', 'admin', 'admin', 0, 0, b'0');
INSERT IGNORE INTO `job_manage`.`notify_template`(`code`, `name`, `channel`, `title`, `content`, `title_en`, `content_en`, `creator`, `last_modify_user`, `create_time`, `last_modify_time`, `is_default`) VALUES ('cronJobFailed', '定时任务执行失败通知模板', 'weixin', '【蓝鲸作业平台】定时任务启动失败通知', '任务名称：{{ task.name }}\r\n所属业务：[{{ task.bk_biz_id }}] {{ task.bk_biz_name }}\r\n执行策略：{{ task.cron.time_set }}\r\n出错原因：[{{ task.error_code }}] {{ task.error_message }}\r\n查看详情：{{ task.url }}', '【BlueKing JOB】Cron Launch Failed Notification', '   Task Name：{{ task.name }}\r\n    Business：[{{ task.bk_biz_id }}] {{ task.bk_biz_name }}\r\n    Time Set：{{ task.cron.time_set }}\r\n Error Cause：[{{ task.error_code }}] {{ task.error_message }}\r\nTask Details：{{ task.url }}', 'admin', 'admin', 0, 0, b'0');
